var _location=$("meta[name='description']").attr("content"),news_descriptor='<div class="row flex descriptor bgfoxe6a8"><yyyy>年<mm>月</div>',news_item='<a class="row news_item" href="/news/<rowid>">    <div class="timestamp"><b>日期</b> <timestamp></div>    <div class="info">        <div class="image flex"><img src="<src>" /></div>        <div class="title"><title><br/><br/><div style="text-decoration: underline; font-size: calc(2.25 * var(--vh));">閱讀更多<span class="no_translate">&#x00BB;</span></div></div>    </div></a>',
news_info_status='<div class="flex"><a class="image flex<castoff>" href="/item/<mfcid>"><img src="<src>" /></a></div>';
window.news_js=function(f){function m(){f.api_post("request=news&page="+k,function(b,a){b="";if(0===a.length)k=-1,$("div#news_item div.row.last").hide();else{$("div#news_item div#no_news").hide();for(var c=0;c<a.length;c++){var h=a[c][1].slice(0,7);l!==h&&(l=h,b+=news_descriptor.replace(/<yyyy>/g,parseInt(l.split("-")[0])).replace(/<mm>/g,parseInt(l.split("-")[1])));b+=news_item.replace(/<rowid>/g,a[c][0]).replace(/<timestamp>/g,a[c][1]).replace(/<src>/g,a[c][4]||f.dialog_resource.img_src_mfcid.replace(/<mfcid>/g,
a[c][3]?a[c][3]:-1)).replace(/<title>/g,a[c][2])}}$("div#news_item div.row.last").before(b);$(window).trigger("resize");$("div#news_item").trigger("scroll")});k++}delete window.news_js;var k=0,n,l="";$("div#news_item").scroll(function(){clearTimeout(n);0>k||$("div#news_item div.row.last").offset().top-$("div#menu").offset().top>9*$("div#menu").height()||(n=setTimeout(m,333))});$("div#news_item div.row.last").click(m);var d=window.location.pathname.split("/").slice(2,3)[0];d?($("div#news_item").remove(),
f.api_post("request=news&rowid="+d,function(b,a){function c(e){if(e){e=e.split("|,|");for(var p="",g=0;g<e.length;g++)p+=news_info_status.replace(/<src>/g,h[e[g]][1]||f.dialog_resource.img_src_mfcid.replace(/<mfcid>/g,e[g])).replace(/<mfcid>/g,e[g]).replace(/<castoff>/g,h[e[g]][0]?" blur":"");return p}}if(0!==a[0].length){var h=a[1];a=a[0][0];b=$("div#news_info");b.find("div#timestamp").text(a[0]);b.find("div#title").text(a[1]);b.find("div#content span").text(a[2]);b.find("div#status_0 div.image").html(c(a[4]||
""));b.find("div#status_1 div.image").html(c(a[5]||""));b.find("div#status_2 div.image").html(c(a[6]||""));a[4]||b.find("div#status_0").remove();a[5]||b.find("div#status_1").remove();a[6]||b.find("div#status_2").remove();$(window).trigger("resize");$("div#news_info").trigger("scroll")}}),d=$("div#news_info"),f.setup_scroll_hints(d),d.trigger("scroll"),$(window).resize(function(){$("div.image a.image").each(function(){$(this).css({height:$(this).width()+"px"})})})):(m(),$("div#news_info").remove(),
d=$("div#news_item"),f.setup_scroll_hints(d),d.trigger("scroll"))};
