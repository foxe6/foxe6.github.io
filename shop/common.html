<style nonce="foxe6">div.item{min-height:30vh}div.item div.image{height:23vh;width:23vh;display:flex;justify-content:center;align-items:center;background-color:var(--foxe6a);border-radius:1vh;overflow:hidden;z-index:1}div.item div.left_info{display:inline-flex;justify-content:center;align-items:center;flex-direction:column;margin-right:1vh}div.item div.quantity{position:absolute;right:0;bottom:0;padding:.5vh;background-color:var(--foxe0a);border-radius:1vh;font-size:4vh}div.item div.item_info{width:calc(100% - 24vh);display:inline-block}div.item div.item_info span{display:inline-block;word-break:break-all}div.item div.name{font-weight:bold;max-height:calc(3vh * 4 * 1.25);overflow:hidden}div.item div.extra_info{display:flex;justify-content:space-between;align-items:center}div.item div.sku_info{margin-top:1vh;font-size:4vh;background-color:var(--foxe2a);width:6vh;height:6vh;display:flex;justify-content:center;align-items:center;border-radius:3vh}</style> <div id="stock" class="flyin_dialog foxe2"> <style>div#stock{width:100%}div#add_to_cart{width:100%;bottom:0;justify-content:flex-end}div#add_to_cart,div#stock{width:100%;position:absolute;left:0}div#skus{width:100%;height:10vh;background-color:var(--foxe3)}div#sku_info{overflow:auto;height:40vh}div#select_quantity{display:flex;justify-content:space-between;align-items:center;bottom:10vh;background-color:var(--foxe3);position:absolute;height:10vh;width:100%}div#quantity_wrapper,div#select_quantity_descriptor{font-size:4vh;margin-left:3vh}div#quantity_wrapper{padding:0;display:flex;justify-content:center;align-items:center;background-color:var(--foxe3);overflow:hidden;border-radius:4vh;margin-right:3vh}div#quantity_wrapper>div{padding:1vh 2vh;min-width:3.3vh;text-align:center}div#quantity_minus,div#quantity_plus{background-color:var(--foxe4a)}div#quantity_wrapper div#unit{left:0;top:0;position:absolute;width:100%}div#quantity_wrapper div#unit>div{padding:1vh 2vh}</style> <div class="content"> <div class="bg"> <div class="close">×</div> </div> <div id="item_sku" class="dialog"> <div id="select_sku_descriptor" class="descriptor shadow">商品款式</div> <div id="skus" class="z800 shadow"> <select class="dropdown pointer"></select> </div> <div id="sku_info" class="rows foxe4"> <div id="version" j="2" class="row"> <div class="descriptor">款式版本</div> <span>—</span> </div> <div id="final" j="4" class="row"> <div class="descriptor">款式價格</div> ＄<span>—</span> </div> <div id="release_date" j="6" class="row"> <div class="descriptor">發售日期</div> <span>—</span> </div> <div id="deadline" j="7" class="row"> <div class="descriptor">截訂日期</div> <span>—</span> </div> <div id="postpone" j="8" class="row"> <div class="descriptor">發售延遲</div> <span>—</span> </div> <div id="late_po" j="9" class="row"> <div class="descriptor">截訂延遲</div> <span>—</span> </div> </div> </div> <div id="select_quantity" class="shadow"> <div id="select_quantity_descriptor">數量：</div> <div id="quantity_wrapper"> <div id="quantity_minus" class="pointer">-</div><div id="quantity">&nbsp; <div id="unit"> <div>1</div> <div>2</div> <div>3</div> <div>4</div> <div>5</div> <div>6</div> <div>7</div> <div>8</div> <div>9</div> </div> </div><div id="quantity_plus" class="pointer">+</div> </div> </div> <div id="add_to_cart" class="row_action foxe2 shadow"> <div id="add_to_cart_descriptor" class="action"> <div id="for_cart">加入購物車</div> <div id="for_item">變更</div> </div> </div> </div> </div> <script nonce="foxe6">function append_stock(a,b){$(a).filter("div#stock").appendTo("body");$(b).hide();$("div#stock div.bg").click(function(){$("div#stock").fadeOut();$("div#stock > div.content").effect("slide",{mode:"hide",direction:"down"})})}function quantity_plus_e(a){return function(){if(!a.sku_active||!a.quantity_changed){return}if(a.quantity_active+1>9){return}var c;for(var b=0;b<a.item_sku.length;b++){if(a.item_sku[b][0]===a.sku_active){c=a.item_sku[b][5]-a.item_sku[b][10];break}}if(a.quantity_active+1>c){return}a.quantity_changed=false;a.quantity_active++;$("div#quantity div.selected").removeClass("selected").next().addClass("selected");$("div#quantity_wrapper div#unit").animate({top:"-="+$("div#quantity_wrapper div#unit").height()/9+"px"},function(){a.quantity_changed=true})}}function quantity_minus_e(a){return function(){if(!a.sku_active||!a.quantity_changed){return}if(a.quantity_active-1<=0){return}a.quantity_changed=false;a.quantity_active--;$("div#quantity div.selected").removeClass("selected").prev().addClass("selected");$("div#quantity_wrapper div#unit").animate({top:"+="+$("div#quantity_wrapper div#unit").height()/9+"px"},function(){a.quantity_changed=true})}}function setup_sku_select(c,d,b,e,a){c.app.api_post("request=item_sku&mfcid="+d,function(l,f){console.log(f);c.item_sku=f;$("div#stock div#skus select").html("");for(var g=0;g<c.item_sku.length;g++){var j=c.item_sku[g][3];var h=$("<option/>").data("text",j).text(j);var k=c.item_sku[g][9]||c.item_sku[g][7];if(c.item_sku[g][11][0][0]===0&&k){k=str2epoch(k);if(k<=epoch()){h.addClass("disabled")}}if(c.item_sku[g][5]===c.item_sku[g][10]){h.addClass("disabled")}$("div#stock div#skus select").append(h)}c.app.setup_dropdown();$("div#stock div#skus select").off("change").change(function(){for(var n=0;n<c.item_sku.length;n++){if($(this).val()===c.item_sku[n][3]){break}}c.sku_active=c.item_sku[n][0];c.quantity_active=b();var o=c.item_sku[n][9]||c.item_sku[n][7];if(c.item_sku[n][11][0][0]===0&&o){o=str2epoch(o);if(o<=epoch()){c.sku_active=null;alert(app.dialog_resource.alert_sku_deadline.replace(/<kind>/g,c.item_sku[n][3]))}}if(e){e(n)}if(c.item_sku[n][5]===c.item_sku[n][10]){c.sku_active=null;alert(app.dialog_resource.alert_sku_stock.replace(/<kind>/g,c.item_sku[n][3]))}for(var m=0;m<c.item_sku[n].length;m++){var q=$("div#stock div#sku_info div[j='"+m+"'] span");if(q.length===0){continue}var p=c.item_sku[n][m];if(p===null||p===""){continue}q.text(p)}$("div#stock div#quantity div#unit").animate({top:"-"+$("div#stock div#quantity div#unit").height()/9*((c.quantity_active)-1)+"px"})});$("div#stock").fadeIn();$("div#stock > div.content").hide().effect("slide",{mode:"show",direction:"down"},a)})}var item_row_div='<div class="item row flex">    <div class="left_info">        <div class="image flex pointer">            <img<castoff> src="<src>" loading="lazy" referrerpolicy="no-referrer" />            <div class="quantity">×<quantity></div>        </div>        <div class="sku_info pointer"><sku_info></div>    </div>    <div class="item_info">        <div class="name"><a href="/item/<mfcid>"><name></a></div>        <div class="status"><b>商品狀態</b> <span><status></span></div>        <div class="kind"><b>款式</b> <span><kind></span></div>    </div></div><div class="flex row" style="justify-content: space-between;">    <div class="price"><b>價格</b> <span>＄<price>／個</span></div class="price">    <div class="total"><b>共</b> <span>＄<total></span></div></div>';var item_row_total='<div class="flex row header" style="font-size: 4vh; justify-content: space-between;">    <div><b>小計</b></div>    <div>＄<span></span></div></div>';var dialog_sku_info="<table>    <tr><td>商品狀態</td><td><status></td></tr>    <tr><td>商品款式</td><td><kind></td></tr>    <tr><td>款式版本</td><td><version></td></tr>    <tr><td>款式價格</td><td>＄<price>／個</td></tr>    <tr><td>款式數量</td><td><quantity>個</td></tr>    <tr><td>發售日期</td><td><release_date></td></tr>    <tr><td>截訂日期</td><td><deadline></td></tr>    <tr><td>發售延遲</td><td><postpone></td></tr>    <tr><td>截訂延遲</td><td><late_po></td></tr></table>";function gen_checkout_order_item(a,s,k,j){$(s).html("");var t=0;for(var o=0;o<a.length;o++){var q=a[o][0];var u=a[o][1];var b=a[o][3];var m=a[o][4];var d=a[o][5];var h=a[o][6];var g=a[o][7];var c=a[o][8];var n=a[o][9];var l=a[o][10];var r=a[o][11];var f=a[o][12];var p=a[o][13];t+=n*h;var e=$(item_row_div.replace(/<src>/g,j.dialog_resource.img_src_mfcid.replace(/<mfcid>/g,q)).replace(/<castoff>/g,(b&&document.cookie.indexOf("off_blur")===-1?" class='blur'":"")).replace(/<mfcid>/g,q).replace(/<sku_info>/g,k(d)).replace(/<name>/g,u).replace(/<status>/g,m).replace(/<kind>/g,g).replace(/<price>/g,n).replace(/<quantity>/g,h).replace(/<total>/g,""+n*h));e.find("div.sku_info").click((function(w,i,A,x,v,z,C,y,B){return function(){dialog(undefined,"款式詳情",$(dialog_sku_info.replace(/<status>/g,w).replace(/<kind>/g,i).replace(/<version>/g,A).replace(/<price>/g,x).replace(/<quantity>/g,v).replace(/<release_date>/g,(z)?z:"—").replace(/<deadline>/g,(C)?C:"—").replace(/<postpone>/g,(y)?y:"—").replace(/<late_po>/g,(B)?B:"—"))[0])}})(m,g,c,n,h,l,r,f,p));$(s).append(e)}e=$(item_row_total);e.find("span").text(t);$(s).append(e);setInterval(function(){$("div.row.header span").text(t)},1000);$("div.item div.image").click(j.image_preview_e)};</script>