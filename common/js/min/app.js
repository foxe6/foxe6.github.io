(function(r){String.prototype.replace=function(){if(2===arguments.length){var D=arguments[0];"string"!==typeof arguments[0]&&(D=D.toString().match(/\/(.*)\//)[1]);D.match(/^<[a-z]+>$/)&&(arguments[1]=$("<div/>").text(arguments[1]).html())}return r.apply(this,arguments)}})(String.prototype.replace);
!function(r,D){function t(q){var v,x,k=[];"picture"===q.parentNode.tagName.toLowerCase()&&(v=q.parentNode,(x=v.querySelector("source[data-lazy-remove]"))&&v.removeChild(x),k=Array.prototype.slice.call(q.parentNode.querySelectorAll("source")));k.push(q);k.forEach(function(b){b.hasAttribute("data-lazy-srcset")&&(b.setAttribute("srcset",b.getAttribute("data-lazy-srcset")),b.removeAttribute("data-lazy-srcset"))});q.setAttribute("src",q.getAttribute("data-lazy-src"));q.removeAttribute("data-lazy-src")}
function g(q){var v=document.createElement("div"),x=q.textContent||q.innerHTML;var k="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 "+((x.match(/width=['"](\d+)['"]/)||!1)[1]||1)+" "+((x.match(/height=['"](\d+)['"]/)||!1)[1]||1)+"%27%3E%3C/svg%3E";k=(!z.loading&&z.scrolling&&(void 0===f?x=x.replace(/(?:\r\n|\r|\n|\t| )src=/g,' lazyload="1" src='):("picture"===q.parentNode.tagName.toLowerCase()&&(x='<source srcset="'+k+'" data-lazy-remove="true"></source>'+x),x=x.replace(/(?:\r\n|\r|\n|\t| )srcset=/g,
" data-lazy-srcset=").replace(/(?:\r\n|\r|\n|\t| )src=/g,' src="'+k+'" data-lazy-src='))),x);for(v.innerHTML=k;v.firstChild;)z.loading||!z.scrolling||void 0===f||!v.firstChild.tagName||"img"!==v.firstChild.tagName.toLowerCase()&&"iframe"!==v.firstChild.tagName.toLowerCase()||f.observe(v.firstChild),q.parentNode.insertBefore(v.firstChild,q);q.parentNode.removeChild(q)}function c(){document.querySelectorAll("noscript."+r).forEach(g);void 0!==window.matchMedia&&window.matchMedia("print").addListener(function(q){q.matches&&
document.querySelectorAll(h.lazyImage+"[data-lazy-src],"+h.lazyIframe+"[data-lazy-src]").forEach(function(v){t(v)})})}var f,h={rootMargin:"256px 0px",threshold:.01,lazyImage:'img[loading="lazy"]',lazyIframe:'iframe[loading="lazy"]'},z={loading:"loading"in HTMLImageElement.prototype&&"loading"in HTMLIFrameElement.prototype,scrolling:"onscroll"in window};"undefined"!=typeof NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);"IntersectionObserver"in
window&&(f=new IntersectionObserver(function(q,v){q.forEach(function(x){0!==x.intersectionRatio&&(x=x.target,v.unobserve(x),t(x))})},h));var A="requestAnimationFrame"in window?window.requestAnimationFrame:function(q){q()};/comp|inter/.test(document.readyState)?A(c):"addEventListener"in document?document.addEventListener("DOMContentLoaded",function(){A(c)}):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()})}("loading-lazy");
!function(r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r():r()}(function(){var r="undefined"!=typeof window?window:this,D=r.Glider=function(g,c){if(g._glider)return g._glider;if(this.ele=g,this.ele.classList.add("glider"),(this.ele._glider=this).opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(f,h,z,A,q){return A*(h/=q)*h+z}},c),this.animate_id=this.page=this.slide=0,this.arrows={},this._opt=this.opt,this.opt.skipTrack)this.track=
this.ele.children[0];else for(this.track=document.createElement("div"),this.ele.appendChild(this.track);1!==this.ele.children.length;)this.track.appendChild(this.ele.children[0]);this.track.classList.add("glider-track");this.init();this.resize=this.init.bind(this,!0);this.event(this.ele,"add",{scroll:this.updateControls.bind(this)});this.event(r,"add",{resize:this.resize})},t=D.prototype;return t.init=function(g,c){var f=this,h=0;f.slides=f.track.children;[].forEach.call(f.slides,function(q){q.classList.add("glider-slide")});
f.containerWidth=f.ele.clientWidth;var z=f.settingsBreakpoint();if(c=c||z,"auto"===f.opt.slidesToShow||void 0!==f.opt._autoSlide){var A=f.containerWidth/f.opt.itemWidth;f.opt._autoSlide=f.opt.slidesToShow=f.opt.exactWidth?A:Math.floor(A)}"auto"===f.opt.slidesToScroll&&(f.opt.slidesToScroll=Math.floor(f.opt.slidesToShow));f.itemWidth=f.opt.exactWidth?f.opt.itemWidth:f.containerWidth/f.opt.slidesToShow;[].forEach.call(f.slides,function(q){q.style.height="auto";q.style.width=f.itemWidth+"px";h+=f.itemWidth});
f.track.style.width=h+"px";f.trackWidth=h;f.isDrag=!1;f.preventClick=!1;f.opt.resizeLock&&f.scrollTo(f.slide*f.itemWidth,0);(z||c)&&(f.bindArrows(),f.buildDots(),f.bindDrag());f.updateControls();f.emit(g?"refresh":"loaded")},t.bindDrag=function(){function g(){c.mouseDown=void 0;c.ele.classList.remove("drag");c.isDrag&&(c.preventClick=!0);c.isDrag=!1}var c=this;c.mouse=c.mouse||c.handleMouse.bind(c);var f={mouseup:g,mouseleave:g,mousedown:function(h){h.preventDefault();h.stopPropagation();c.mouseDown=
h.clientX;c.ele.classList.add("drag")},mousemove:c.mouse,click:function(h){c.preventClick&&(h.preventDefault(),h.stopPropagation());c.preventClick=!1}};c.ele.classList.toggle("draggable",!0===c.opt.draggable);c.event(c.ele,"remove",f);c.opt.draggable&&c.event(c.ele,"add",f)},t.buildDots=function(){if(this.opt.dots){if("string"==typeof this.opt.dots?this.dots=document.querySelector(this.opt.dots):this.dots=this.opt.dots,this.dots){this.dots.innerHTML="";this.dots.classList.add("glider-dots");for(var g=
0;g<Math.ceil(this.slides.length/this.opt.slidesToShow);++g){var c=document.createElement("button");c.dataset.index=g;c.setAttribute("aria-label","Page "+(g+1));c.className="glider-dot "+(g?"":"active");this.event(c,"add",{click:this.scrollItem.bind(this,g,!0)});this.dots.appendChild(c)}}}else this.dots&&(this.dots.innerHTML="")},t.bindArrows=function(){var g=this;g.opt.arrows?["prev","next"].forEach(function(c){var f=g.opt.arrows[c];f&&("string"==typeof f&&(f=document.querySelector(f)),f._func=f._func||
g.scrollItem.bind(g,c),g.event(f,"remove",{click:f._func}),g.event(f,"add",{click:f._func}),g.arrows[c]=f)}):Object.keys(g.arrows).forEach(function(c){c=g.arrows[c];g.event(c,"remove",{click:c._func})})},t.updateControls=function(g){var c=this;g&&!c.opt.scrollPropagate&&g.stopPropagation();var f=c.containerWidth>=c.trackWidth;c.opt.rewind||(c.arrows.prev&&c.arrows.prev.classList.toggle("disabled",0>=c.ele.scrollLeft||f),c.arrows.next&&c.arrows.next.classList.toggle("disabled",Math.ceil(c.ele.scrollLeft+
c.containerWidth)>=Math.floor(c.trackWidth)||f));c.slide=Math.round(c.ele.scrollLeft/c.itemWidth);c.page=Math.round(c.ele.scrollLeft/c.containerWidth);var h=c.slide+Math.floor(Math.floor(c.opt.slidesToShow)/2),z=Math.floor(c.opt.slidesToShow)%2?0:h+1;1===Math.floor(c.opt.slidesToShow)&&(z=0);c.ele.scrollLeft+c.containerWidth>=Math.floor(c.trackWidth)&&(c.page=c.dots?c.dots.children.length-1:0);[].forEach.call(c.slides,function(A,q){var v=A.classList;A=v.contains("visible");var x=c.ele.scrollLeft,
k=c.ele.scrollLeft+c.containerWidth,b=c.itemWidth*q,a=b+c.itemWidth;[].forEach.call(v,function(e){/^left|right/.test(e)&&v.remove(e)});v.toggle("active",c.slide===q);h===q||z&&z===q?v.add("center"):(v.remove("center"),v.add([q<h?"left":"right",Math.abs(q-(q<h?h:z||h))].join("-")));x=Math.ceil(b)>=x&&Math.floor(a)<=k;v.toggle("visible",x);x!==A&&c.emit("slide-"+(x?"visible":"hidden"),{slide:q})});c.dots&&[].forEach.call(c.dots.children,function(A,q){A.classList.toggle("active",c.page===q)});g&&c.opt.scrollLock&&
(clearTimeout(c.scrollLock),c.scrollLock=setTimeout(function(){clearTimeout(c.scrollLock);.02<Math.abs(c.ele.scrollLeft/c.itemWidth-c.slide)&&(c.mouseDown||c.scrollItem(c.round(c.ele.scrollLeft/c.itemWidth)))},c.opt.scrollLockDelay||250))},t.scrollItem=function(g,c,f){f&&f.preventDefault();var h=this,z=g;if(++h.animate_id,!0===c)g*=h.containerWidth,g=Math.round(g/h.itemWidth)*h.itemWidth;else{if("string"==typeof g&&(f="prev"===g,g=h.opt.slidesToScroll%1||h.opt.slidesToShow%1?h.round(h.ele.scrollLeft/
h.itemWidth):h.slide,f?g-=h.opt.slidesToScroll:g+=h.opt.slidesToScroll,h.opt.rewind)){var A=h.ele.scrollLeft;g=f&&!A?h.slides.length:!f&&A+h.containerWidth>=Math.floor(h.trackWidth)?0:g}g=Math.max(Math.min(g,h.slides.length),0);h.slide=g;g*=h.itemWidth}return h.scrollTo(g,h.opt.duration*Math.abs(h.ele.scrollLeft-g),function(){h.updateControls();h.emit("animated",{value:z,type:"string"==typeof z?"arrow":c?"dot":"slide"})}),!1},t.settingsBreakpoint=function(){var g=this._opt.responsive;if(g){g.sort(function(h,
z){return z.breakpoint-h.breakpoint});for(var c=0;c<g.length;++c){var f=g[c];if(r.innerWidth>=f.breakpoint)return this.breakpoint!==f.breakpoint&&(this.opt=Object.assign({},this._opt,f.settings),this.breakpoint=f.breakpoint,!0)}}g=0!==this.breakpoint;return this.opt=Object.assign({},this._opt),this.breakpoint=0,g},t.scrollTo=function(g,c,f){var h=this,z=(new Date).getTime(),A=h.animate_id,q=function(){var v=(new Date).getTime()-z;h.ele.scrollLeft+=(g-h.ele.scrollLeft)*h.opt.easing(0,v,0,1,c);v<c&&
A===h.animate_id?r.requestAnimationFrame(q):(h.ele.scrollLeft=g,f&&f.call(h))};r.requestAnimationFrame(q)},t.removeItem=function(g){this.slides.length&&(this.track.removeChild(this.slides[g]),this.refresh(!0),this.emit("remove"))},t.addItem=function(g){this.track.appendChild(g);this.refresh(!0);this.emit("add")},t.handleMouse=function(g){this.mouseDown&&(this.isDrag=!0,this.ele.scrollLeft+=(this.mouseDown-g.clientX)*(this.opt.dragVelocity||3.3),this.mouseDown=g.clientX)},t.round=function(g){var c=
1/(this.opt.slidesToScroll%1||1);return Math.round(g*c)/c},t.refresh=function(g){this.init(!0,g)},t.setOption=function(g,c){var f=this;f.breakpoint&&!c?f._opt.responsive.forEach(function(h){h.breakpoint===f.breakpoint&&(h.settings=Object.assign({},h.settings,g))}):f._opt=Object.assign({},f._opt,g);f.breakpoint=0;f.settingsBreakpoint()},t.destroy=function(){function g(f){f.removeAttribute("style");[].forEach.call(f.classList,function(h){/^glider/.test(h)&&f.classList.remove(h)})}var c=this.ele.cloneNode(!0);
c.children[0].outerHTML=c.children[0].innerHTML;g(c);[].forEach.call(c.getElementsByTagName("*"),g);this.ele.parentNode.replaceChild(c,this.ele);this.event(r,"remove",{resize:this.resize});this.emit("destroy")},t.emit=function(g,c){g=new r.CustomEvent("glider-"+g,{bubbles:!this.opt.eventPropagate,detail:c});this.ele.dispatchEvent(g)},t.event=function(g,c,f){var h=g[c+"EventListener"].bind(g);Object.keys(f).forEach(function(z){h(z,f[z])})},D});
window.Slideshow=function(){var r=this;r.glider_template='<div class="glider-contain">    <div class="glider pointer"></div>    <div class="glider-controls">        <button aria-label="Previous" class="glider-prev pointer">❮</button>        <button aria-label="Next" class="glider-next pointer">❯</button>        <div role="tablist" class="dots"></div>    </div></div>';r.img_template="<div><img src='<src>' /></div>";r.attach_slideshow=function(){$(r.glider_template).appendTo("div#slideshow");return r};
r.add_images=function(D){for(var t=0;t<D.length;t++)$("div.glider").append(r.img_template.replace(/<src>/g,D[t]));return r};r.glider_dot_events=function(){var D=setInterval(function(){var t=$("button.glider-dot");0<t.length&&(clearInterval(D),10<t.length?t.hide():$("button.glider-dot").addClass("btn foxe3 az pointer"))},100)};r.setup=function(D,t){r.add_images(D);D=new window.Glider($("div.glider")[0],{slidesToShow:1,dots:"div.dots",draggable:!1,arrows:{prev:"button.glider-prev",next:"button.glider-next"},
scrollLock:!0,scrollLockDelay:500,rewind:!0});r.glider_dot_events();$("div.glider").on("glider-refresh",r.glider_dot_events);$("div.glider-slide").click(t);return D};r.attach_slideshow();return r};
!function(r){function D(k){for(var b=[],a=0,e=0;e<k.length;e++){var d=k.charCodeAt(e);128>d?b[a++]=d:(2048>d?b[a++]=d>>6|192:(55296==(d&64512)&&e+1<k.length&&56320==(k.charCodeAt(e+1)&64512)?(d=65536+((d&1023)<<10)+(k.charCodeAt(++e)&1023),b[a++]=d>>18|240,b[a++]=d>>12&63|128):b[a++]=d>>12|224,b[a++]=d>>6&63|128),b[a++]=d&63|128)}return b}function t(k){for(var b=[],a=0,e=0;a<k.length;){var d=k[a++];if(128>d)b[e++]=String.fromCharCode(d);else if(191<d&&224>d){var l=k[a++];b[e++]=String.fromCharCode((d&
31)<<6|l&63)}else if(239<d&&365>d){l=k[a++];var m=k[a++],n=k[a++];d=((d&7)<<18|(l&63)<<12|(m&63)<<6|n&63)-65536;b[e++]=String.fromCharCode(55296+(d>>10));b[e++]=String.fromCharCode(56320+(d&1023))}else l=k[a++],m=k[a++],b[e++]=String.fromCharCode((d&15)<<12|(l&63)<<6|m&63)}return b.join("")}function g(k,b){return D(b).map(function(a,e){return a^k[Math.floor(e%k.length)]})}function c(k,b){return t(b.map(function(a,e){return a^k[Math.floor(e%k.length)]}))}var f=new function(k){var b,a,e,d,l,m,n;var w=
function(u,y){for(var B;0!==y;)B=y,y=u%y,u=B;return u};var p=function(u,y,B,C){var H,E;var K=function(M){C?F.push(M):F.push(d.charAt(M))};var G=E=0;var F=[];var I=u.length;for(H=0;H<I;H+=1){G+=y;if(C){var L=u[H];var J=d.indexOf(L);if(L===b)break;else if(0>J)throw'the character "'+L+'" is not a member of '+d;}else if(J=u[H],(J|n)!==n)throw J+" is outside the range 0-"+n;for(E=E<<y|J;G>=B;)G-=B,K(E>>G),E&=l[G]}if(!C&&0<G)for(K(E<<B-G);0<F.length%m;)F.push(b);return C?F:F.join("")};this.encode=function(u){return p(u,
a,e,!1)};this.decode=function(u){return p(u,e,a,!0)};(function(){var u;b=k.pad||"";a=k.dataBits;e=k.codeBits;d=k.keyString;var y=Math.max(a,e);var B=0;l=[];for(u=0;u<y;u+=1)l.push(B),B+=B+1;n=B;m=a/w(a,e)})()}({dataBits:8,codeBits:5,keyString:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",pad:"="}),h={img_src_mfcid:"https://static.myfigurecollection.net/pics/figure/large/<mfcid>.jpg",confirm_register:"一旦註冊後，將不能變更帳號名稱、電話號碼、電子郵箱。\n確定註冊？",success_register:"成功註冊！\n請登陸。",confirm_deregister:"確定註銷？",success_deregister:"成功註銷！",
success_logout:"成功登出！",alert_upload_proof_oversize:"照片大小過大，請壓縮或裁剪照片後再次上載。",alert_upload_proof_type:"請選擇照片格式。",alert_upload_proof_select:"請先選擇照片，\n然後點擊上載。",success_upload_proof_notify_failed:"照片上載成功！\n未能通知客服核對。\n請聯系客服。",success_upload_proof_notify_success:"照片上載成功！\n已通知客服核對。\n請耐心等候。",alert_upload_proof:"照片上載失敗。\n請重新上載或尋找客服核對。",success_review:"成功評論！",confirm_order_delete:"確定刪除訂單？",success_order_delete:"成功刪除訂單！",confirm_draw:"一旦確定後，將不退回金幣。\n確定花費 <fees> 枚金幣？",success_thanks:"多謝參與！",confirm_change_pw:"確定變更密碼？",
success_change_pw:"成功變更密碼！",confirm_change_postal_info:"確定變更郵寄資料？",success_change_postal_info:"成功變更郵寄資料！",text_upload_proof_1:"已選擇照片",text_upload_proof_2:"上載中，請稍候…",syserr_prefix:"<div>請刷新重試。<br/>如持續出現錯誤，<br/>請電郵回報問題：<br/><a href='mailto:foxe6@pm.me'>foxe6@pm.me</a></div>",syserr_title:"系統錯誤",syserr_button:"請刷新重試",alert_sku_select:"請選擇款式。",success_sku_select:"成功加入購物車！",alert_item_select:"請選擇商品。",alert_cart_exist:"購物車內已存在此款式。",confirm_order_cancel:"確定取消訂單？",success_order_cancel:"成功取消訂單！",alert_sku_max_quantity:"款式 <kind> 最大數量為 <max_quantity> 。",
alert_sku_stock:"款式 <kind> 缺貨。",alert_sku_deadline:"款式 <kind> 已截訂。",confirm_cart_delete:"確定刪除商品？",success_cart_delete:"成功刪除商品！",confirm_off_blur:"確定關閉內容過濾？",success_off_blur:"成功關閉內容過濾！",tos_title:"歡迎來臨<title>！",tos_content:$("<div>通過瀏覽本網域的頁面，您即同意本網域的<a href='http://foxe6.kozow.com/tos'>Terms of Service</a>、<a href='http://foxe6.kozow.com/disclaimer'>Disclaimer</a>、<a href='http://foxe6.kozow.com/privacy'>Privacy Policy</a>。<br/></div>")[0],tos_buttons:{cancel:"不同意並離開",confirm:"同意並進入"},rarp_shipping_title:"歡迎使用<title>！",
rarp_shipping_content:$('<div style="text-align: left;">親愛的顧客，為增強使用體驗，請閱讀常見問題。<br/>通過交易本網域的商品，您即同意本網域的<a href="http://foxe6.kozow.com/rarp">Return and Refund Policy</a>、<a href="http://foxe6.kozow.com/shipping">Shipping</a>。</div>')[0],thx4donation:"請通過捐款方式<br/>支持開發人員。",dialog_ok:"了解並關閉",alert_title:"溫馨提示",success_title:"操作成功",success_ok:"好的",confirm_title:"敬請注意",confirm_cancel:"取消",confirm_confirm:"確定",warn_429:"<div class='image'><img src='https://foxe6.github.io/common/img/asset/error/429.jpg'/></div>"},
z=function(){setInterval(function(){$("img[src*='myfigurecollection']:not(.checked)").each(function(){-1!==$(this).attr("src").indexOf("/-1.jpg")?($(this).attr("src","https://foxe6.github.io/root/img/asset/icon/foxe6.svg"),$(this).parent().css({"background-color":"black"})):this.complete&&(0===this.naturalWidth&&$(this).attr("src",$(this).attr("src").replace("/large/","/big/")),$(this).addClass("checked"))})},1E3)};window.dialog=function(k,b,a,e,d){var l=k;"string"===typeof a&&(a="syserr"===k&&-1!==
a.indexOf("Traceback (most recent call last):")?h.syserr_prefix+"<textarea class='log'>"+a+"</textarea>":a.replace(/\r?\n/g,"$&<br/>"),"syserr"===k&&(k="alert"),a=$("<div/>").html(a)[0]);"warn"===l&&(k="confirm");a={closeOnEsc:!0,closeOnClickOutside:!1,content:a};b?a.title=b:"alert"===k?a.title=h.alert_title:"confirm"===k?a.title=h.confirm_title:"success"===k&&(a.title=h.success_title);e?"confirm"===k?a.buttons=e:a.button=e:"confirm"===k?a.buttons={cancel:h.confirm_cancel,confirm:h.confirm_confirm}:
a.button="success"===k?h.success_ok:h.dialog_ok;b=swal(a);"warn"===l?$(".swal-overlay").addClass("warn"):$(".swal-overlay").removeClass("warn");d&&b.then(d);$("div.swal-icon img").hide();k&&0!==$("div.swal-title").length&&(d="https://foxe6.github.io/common/img/asset/swal/"+k+".svg",0===$("div.swal-icon").length?$("div.swal-title").before("<div class='swal-icon'><img class='"+k+"' src='"+d+"' /></div>"):$("div.swal-icon img").attr("class",k).attr("src",d))};window.alert=function(k,b){dialog("alert",
void 0,k,void 0,b)};window.warn=function(k,b,a){dialog("warn",void 0,k,b,a)};window.success=function(k,b){dialog("success",void 0,k,void 0,b)};window.confirm=function(k,b){dialog("confirm",void 0,k,void 0,b)};window.syserr=function(k,b){dialog("syserr",h.syserr_title,k,h.syserr_button,b)};window.str2epoch=function(k){return Date.parse(k)/1E3};window.epoch=function(){return(new Date).getTime()/1E3};var A,q=function(){A={};var k=document.cookie.matchAll(/([^=]+)(?:=)([^; ]+)(?:; |$)/g);k=Array.from(k,
function(a){return a});for(var b=0;b<k.length;b++)A[k[b][1]]='"'===k[b][2][0]&&'"'===k[b][2][k[b][2].length-1]?k[b][2].slice(1,-1):k[b][2]};q();var v,x=0;(function(){for(var k=[["before","after","prepend","append"],["insertBefore","insertAfter","prependTo","appendTo"]],b=0;b<k.length;b++)for(var a=0;a<k[b].length;a++){var e=k[b][a];$.fn["old_"+e]=$.fn[e];$.fn[e]=function(d,l){return function(m){var n=m;"string"!==typeof m||-1===m.indexOf("</")&&-1===m.indexOf("/>")||(n=$(m),(0===d?n:this).find("img").attr("loading",
"lazy").attr("referrerpolicy","no-referrer"));return this["old_"+k[d][l]](n)}}(b,a)}$.fn.old_fadeIn=$.fn.fadeIn;$.fn.fadeIn=function(d,l){$.isFunction(d)&&(l=d,d=333);return $(this).each(function(){var m=$(this);$.fn.old_fadeIn.apply(m,[d,function(){$.isFunction(l)&&l.apply(m);m.trigger("fadeIn_callback")}])})};$.fn.old_effect=$.fn.effect;$.fn.effect=function(d,l,m){return $(this).each(function(){var n=$(this);$.fn.old_effect.apply(n,[d,l,function(){$.isFunction(m)&&m.apply(n);n.trigger("effect_callback")}])})};
z()})();r.foxe6=function(){if(1>x){x++;var k=setInterval(function(){"undefined"!==typeof _location&&(clearInterval(k),$("div#menu div#location").text(_location),document.title=_location+" "+document.title)},100),b=this;b.dialog_resource=h;b.reset_gr=function(a){window.grecaptcha.reset(a)};b.gen_gr=function(a,e,d){var l,m=function(){b.reset_gr(l)};a=a.before("<div class='flex'/>").prev()[0];return l=window.grecaptcha.render(a,{size:e,badge:"bottomleft",sitekey:"6LfWq2QaAAAAAIR-QDmaaHJS82Ng5kRVqXFWpHKS",
callback:d,"expired-callback":m,"error-callback":m})};b.input_enter_e=function(a){13===a.keyCode&&$(a.target).closest("form").find("div#submit").click()};b.image_preview_e=function(a,e){a=$(a.target||a);var d=a.find("img");!d.hasClass("blur")&&(d=d.attr("src"))&&($("div#preview img").attr("src",d),$("div#preview div.description").html(a.html().replace(/<br\/?>/g,"\n").replace(/<.*?>/g,"").trim().replace("\n","<br/>")),$("div#preview").css({display:"flex"}).show().hide(),"undefined"===typeof e&&$("div#preview").fadeIn())};
b.check_d=function(){b.api_post("request=d&d="+window.location.host,function(a,e){if(!e)for(;;)document.body.innerHTML=""},void 0,!1)};b.post=function(a,e,d,l,m){var n,w=[];for(n=0;n<A._k.length;n++)w.push(A._k.charCodeAt(n));n="undefined"===typeof e?"":"string"===typeof e?e:e.serialize();n=A._x+"|,|"+f.encode(g(w,n)).replace(/=/g,"");$("div#loading").finish().fadeIn();$.post(a,n,function(p){p=c(w,f.decode(p));void 0!==d&&d(e,p);$("div#loading").fadeOut()}).fail(function(p){if(429===p.status)return dialog("alert",
"請稍候重試",b.dialog_resource.warn_429);p=p.responseText;try{p=JSON.parse(p).msg}catch(u){}$("div#loading").fadeOut();void 0!==l&&l(e,p);"undefined"!==typeof m&&!0!==m||syserr(p)})};b.api_post=function(a,e,d,l){b.post("/api",a,function(m,n){n=JSON.parse(n);"string"===typeof n?(void 0!==d&&d(m,n),"undefined"!==typeof l&&!0!==l||alert(n)):void 0!==e&&e(m,n)},d,l)};b.check_agreed_tos=function(){q();"agreed_tos"in A||dialog("confirm",b.dialog_resource.tos_title.replace(/<title>/g,document.title.split(" | ").slice(-1)[0]),
b.dialog_resource.tos_content,b.dialog_resource.tos_buttons,function(a){if(a)b.api_post("request=agreed_tos");else{var e=window.location.href;window.history.back();setTimeout(function(){window.location.href===e&&window.close();throw"page going back";},500)}})};b.check_understood_rarp_shipping=function(){q();"understood_rarp_shipping"in A||dialog(void 0,b.dialog_resource.rarp_shipping_title.replace(/<title>/g,document.title.split(" | ").slice(-1)[0]),b.dialog_resource.rarp_shipping_content,void 0,
function(a){b.api_post("request=understood_rarp_shipping")})};b.login_register_form_e=function(){$("div#agree_tou").click(function(a){$(a.target).children().fadeToggle();$("input[name='agree_tou']").prop("checked",!$("input[name='agree_tou']").prop("checked"))});$("div#forget_pw").click(function(){$(this).closest("div.content").parent().fadeOut();$("div#cs_page").fadeIn()});$("form.simple div.input input").keyup(b.input_enter_e)};b.login_form=function(){var a=-1,e,d=$('<form class="simple" autocomplete="off">    <div class="descriptor">登陸</div>    <input type="hidden" name="request" value="login" />    <div class="input"><input name="username" placeholder="帳號名稱" /></div>    <div class="input"><input name="password" placeholder="密碼" type="password" /></div>    <div id="submit" class="flex button">提交</div>    <div id="forget_pw" class="flex button">忘記密碼</div></form>'),
l=d.find("div#submit").click(function(){e&&-1!==a&&b.api_post(d,function(w,p){window.location.reload(!0);throw"page reloading";},function(w,p){alert(p,function(u){e=null;b.reset_gr(a);w[0].reset()})},!1)}),m=function(w){e=w},n=setInterval(function(){"undefined"!==typeof window.grecaptcha&&(clearInterval(n),a=b.gen_gr(l,null,m))},500);return d};b.register_form=function(){var a=-1,e=$('<form class="simple" autocomplete="off">    <div class="descriptor">註冊</div>    <input type="hidden" name="request" value="register" />    <div class="input"><input name="username" placeholder="帳號名稱" /></div>    <div class="input"><input name="phone" placeholder="電話號碼(格式:(852)12345678)" /></div>    <div class="input"><input name="email" placeholder="電子郵箱" /></div>    <div class="input"><input name="password" placeholder="密碼(格式:Ab12345678)" type="password" /></div>    <div id="understand_tou">        <div id="agree_tou" class="pointer"><span>☐</span><span style="display: none;">☑</span></div>        <input name="agree_tou" type="checkbox" style="display: none;" />        我已閱讀並同意本網域的<a href="http://foxe6.kozow.com/tou">Terms of Use</a>。    </div>    <div id="submit" class="flex button">提交</div></form>'),
d=e.find("div#submit").click(function(){-1!==a&&confirm(b.dialog_resource.confirm_register,function(n){n&&window.grecaptcha.execute(a)})}),l=function(n){b.api_post(e,function(w,p){success(b.dialog_resource.success_register,function(u){$("div#register_page").fadeOut();$("div#login_page").fadeIn();$("div#login_page").find("input[name='username']").val(w.find("input[name='username']").val());$("div#login_page").find("input[name='password']").val("");b.reset_gr(a);w[0].reset()})},function(w,p){b.reset_gr(a)})},
m=setInterval(function(){"undefined"!==typeof window.grecaptcha&&(clearInterval(m),a=b.gen_gr(d,"invisible",l))},500);return e};b.logout_e=function(){b.api_post("request=logout",function(a,e){success(b.dialog_resource.success_logout,function(d){window.location.reload(!0)});throw"page reloading";},function(a,e){alert(e,function(d){window.location.reload(!0)});throw"page reloading";},!1)};b.ac_info=function(){var a=$('<div id="ac_info" class="table rows foxe3">    <div class="tr">        <div class="td row">            <div>基礎資料</div>            <table>                <tr>                    <td style="word-break: keep-all;">電話號碼</td>                    <td id="phone"></td>                </tr>                <tr>                    <td style="word-break: keep-all;">電郵地址</td>                    <td id="email" style="word-break: break-all"></td>                </tr>                <tr>                    <td style="word-break: keep-all;">郵寄資料</td>                    <td id="postal_info" style="word-break: break-all"></td>                </tr>            </table>        </div>    </div>    <div class="tr">        <div class="td row">            <div>帳號註銷</div>            <table>                <tr>                    <td>帳 號 一 旦 註 銷 ， 帳 號 所 有 資 料 將 包 括 但 不 限 於 停 止 使 用 、 處 理 、 操 作 、 管 理 及 存 取 。</td>                </tr>            </table>            <form class="simple" autocomplete="off">                <div id="deregister" class="flex button">我確定註銷此帳號</div>            </form>        </div>    </div>    <div class="tr">        <div class="td row">            <div>內容過濾</div>            <table>                <tr>                    <td>                        本 網 域 過 濾 並 隱 藏 令 人 反 感 、 十 六 歲 以 上 、 成 人 內 容 。<br/>                        未 滿 十 六 歲 人 士 必 須 在 成 人 陪 同 下 瀏 覽 。<br/>                        本 網 域 嚴 禁 虛 報 年 齡 或 違 法 瀏 覽 等 行 為 。                    </td>                </tr>            </table>            <form class="simple" autocomplete="off">                <div id="off_blur" class="flex button">我同意並關閉內容過濾</div>            </form>        </div>    </div>    <div class="tr">        <div id="change_password" class="td row">            <div>變更密碼</div>            <form class="simple" autocomplete="off">                <input type="hidden" name="request" value="change_password" />                <div class="input"><input name="phone" placeholder="電話號碼" /></div>                <div class="input"><input name="email" placeholder="電子郵箱" /></div>                <div class="input"><input name="old_password" type="password" placeholder="舊密碼" /></div>                <div class="input"><input name="new_password_1" type="password" placeholder="新密碼" /></div>                <div class="input"><input name="new_password_2" type="password" placeholder="確認新密碼" /></div>                <div id="submit" class="flex button">提交</div>            </form>        </div>    </div>    <div class="tr">        <div id="update_postal_info" class="td row">            <div>更新郵寄資料</div>            <form class="simple" autocomplete="off">                <input type="hidden" name="request" value="update_postal_info" />                <div class="input"><input name="password" type="password" placeholder="密碼" /></div>                <div class="input"><input class="postal_info" placeholder="收件人姓名" /></div>                <div class="input"><input class="postal_info" placeholder="收件人電話" /></div>                <div class="input"><input class="postal_info" placeholder="收件人地址" /></div>                <input type="hidden" name="postal_info" />                <div id="submit" class="flex button">提交</div>            </form>        </div>    </div></div><div id="history" class="table rows foxe3">    <div class="thead">        <div class="tr">            <div class="td row header">時間戳記</div>            <div class="td row header">操作</div>        </div>    </div>    <div id="history_target" class="tbody"></div></div>');
b.api_post("request=ac_info",function(e,d){console.log(d.postal_info.split("・").join("<br/>"));e=(d.postal_info||"").split("・");for(var l=0;l<e.length;l++)e[l]=$("<div/>").text(e[l]).html();a.find("td#postal_info").html(e.join("<br/>"));a.find("td#phone").text(d.phone);a.find("td#email").text(d.email);if(0!==d.history.length){e="";for(l=0;l<d.history.length;l++)e+="<div class='tr'><div class='td row' style='white-space: nowrap;'><ts></div><div class='td row'><activity></div></div>".replace(/<ts>/g,
d.history[l][0].split(" ").join("<br/>")).replace(/<activity>/g,d.history[l][1]);a.find("#history_target").html(e)}$("div#ac thead td[id]").click(function(m){$(m.target).parent().find("td").removeClass("selected");$(m.target).addClass("selected");$("div#ac div#ac_info, div#ac div#record, div#ac div#history").hide();$("div#ac div#"+$(m.target).attr("id")).stop().fadeIn();m=$("div#ac div.content");0!==m.length&&(m[0].scrollTop=0)}).eq(0).click()});a.find("div#deregister").click(function(){confirm(b.dialog_resource.confirm_deregister,
function(e){e&&b.api_post("request=deregister",function(d,l){success(b.dialog_resource.success_deregister,function(m){window.location.href="/";throw"page redirecting";})})})});a.find("div#off_blur").click(function(){confirm(b.dialog_resource.confirm_off_blur,function(e){e&&b.api_post("request=off_blur",function(d,l){success(b.dialog_resource.success_off_blur)})})});b.form_submit_e(a.find("div#change_password"),b.dialog_resource.confirm_change_pw,b.dialog_resource.success_change_pw);a.find("div#update_postal_info").find("input.postal_info").keyup(function(){a.find("div#update_postal_info").find("input[name='postal_info']").val($.map($("input.postal_info"),
function(e){return $(e).val()}).join("・"))});b.form_submit_e(a.find("div#update_postal_info"),b.dialog_resource.confirm_change_postal_info,b.dialog_resource.success_change_postal_info);return a};b.form_submit_e=function(a,e,d){a.find("div#submit").click(function(l){var m=$(l.target).closest("form");confirm(e,function(n){n&&b.api_post(m.serialize(),function(w,p){success(d,function(u){window.location.reload(!0)});throw"page reloading";})})})};b.check_ban=function(a){b.api_post("request=check_ban",a)};
b.setup_payment_table=function(a,e,d,l,m,n,w){$.get("https://foxe6.github.io/common/js/cs.json",function(p){v=p.cs.whatsapp;var u="<tr>",y="",B;for(B in p.topup.qrcode.images)""!==p.topup.qrcode.images[B]&&(u+='<td id="<k>"><k></td>'.replace(/<k>/g,B),y+='<div id="<k>">    <img src="<src>" />    <div style="font-size: 2.5vh;">請先打開<k>。<br/>然後開啟二維碼掃描功能。<br/>最後把相機鏡頭對準二維碼付款。</div></div>'.replace(/<k>/g,B).replace(/<src>/g,p.topup.qrcode.path+p.topup.qrcode.images[B]));""!==p.topup.fps&&(u+='<td id="fps">轉數快</td>',
y+='<div id="fps">    識別碼（ID）：<fps><br/>    收款人：<payee></div>'.replace(/<fps>/g,p.topup.fps).replace(/<payee>/g,p.topup.payee));""!==p.topup.bank.account&&(u+='<td id="bank">銀行轉帳</td>',y+='<div id="bank">    銀行：<company><br/>    銀行戶口：<account><br/>    收款人：<payee></div>'.replace(/<company>/g,p.topup.bank.company).replace(/<account>/g,p.topup.bank.account).replace(/<payee>/g,p.topup.payee));y+='<div id="paypal">請聯系客服獲取Paypal Invoice及處理交易資料。</div>';u+='<td id="paypal">Paypal</td></tr>';a.find("div#not_paid table tbody div#instructions").html(y);
a.find("div#not_paid thead td[id].selected").click();a.find("div#not_paid table thead").html(u);u=a.find("div#not_paid table thead td[id]");for(y=0;y<u.length;y++)u.eq(y).html("<img src='"+p.topup.wallet.path+p.topup.wallet.images[u.eq(y).attr("id")]+"' />");a.find("div#not_paid thead td[id]").click(function(C){$(C.target).parent().find("td").removeClass("selected");$(C.target).addClass("selected");a.find("div#not_paid tbody div#instructions div[id]").hide();a.find("div#not_paid tbody div#instructions div#"+
$(C.target).attr("id")).show()}).eq(0).click();a.find("td#not_paid, td#i_paid").click(function(C){$(C.target).parent().find("td").removeClass("selected");$(C.target).addClass("selected");a.find("div#not_paid, div#i_paid").hide();a.find("div#"+$(C.target).attr("id")).fadeIn()}).eq(0).click();a.find("div#header_notes").html(e);a.find("div#footer_notes").html(d);l?(p=function(){a.find("div#amount_due span").html(m)},p(),setInterval(p,1E3)):a.find("div#amount_due").html(n);w()})};b.donation_table=function(a,
e,d,l,m){var n=$('<table class="tabs foxe2">    <thead>        <tr>            <td id="not_paid">現在付款</td>            <td id="i_paid">我已付款</td>        </tr>    </thead>    <tbody>        <tr>            <td class="content rows foxe3" colspan="2">                <div id="not_paid">                    <div id="header_notes" class="row"></div>                    <div class="shadow">                        <table class="tabs foxe3" style="margin: 0; width: 100%">                            <thead></thead>                            <tbody>                                <tr>                                    <td class="content" colspan="99">                                        <div>                                            <div id="amount_due">                                                <b>應付金額</b><br/>                                                港元＄<span></span>                                            </div>                                            <div id="instructions"></div>                                        </div>                                    </td>                                </tr>                            </tbody>                        </table>                    </div>                    <div id="footer_notes" class="row"></div>                </div>                <div id="i_paid" class="rows">                    <div class="row">如 已 完 成 付 款 ， 請 上 載 收 據 照 片 以 便 客 服 核 對 。</div>                    <div id="upload_proof" class="row">                        <form class="simple" autocomplete="off">                            <label for="upload_proof_file_image" class="flex button">選擇照片</label>                            <input id="upload_proof_file_image" type="file" name="image" style="display: none;" />                            <input type="hidden" name="request" value="upload_proof" />                            <input class="upload flex button" type="button" value="上載照片" />                        </form>                        <div id="upload_proof_preview">                            <img />                        </div>                    </div>                </div>            </td>        </tr>    </tbody></table>').find("div#not_paid").wrap("<div></div>").parent();
n.find("table.tabs.foxe3").removeClass("foxe3").addClass("foxe2");n.find("div#amount_due, div#instructions").addClass("row").parent().addClass("rows foxe3");b.setup_payment_table(n,a,e,d,l,m,function(){n.find("td#paypal, div#paypal").remove()});return n};b.setup_select_img=function(a,e){e.selected_file_e=a.find("div#upload_proof form input[type='file']").change(function(d){var l=a.find("div#upload_proof form label");l.hasClass("active")&&l.removeClass("active").text(l.text().slice(1));a.find("div#upload_proof_preview img").attr("src",
"");var m=d.target.files[0];"type"in m&&"image"===m.type.split("/")[0]?10485760<m.size?(d.target.value="",alert(b.dialog_resource.alert_upload_proof_oversize)):(d=new FileReader,d.onload=function(n){e.selected_file=n.target.result;a.find("div#upload_proof_preview img").attr("src",e.selected_file);e.selected_file=[e.selected_file.split(",").slice(1)[0],m.name.split(".").slice(-1)[0]];l.addClass("active").text(b.dialog_resource.text_upload_proof_1)},d.readAsDataURL(m)):(d.target.value="",alert(b.dialog_resource.alert_upload_proof_type))})};
b.payment_table=function(a,e,d,l,m,n){var w=$('<table class="tabs foxe2">    <thead>        <tr>            <td id="not_paid">現在付款</td>            <td id="i_paid">我已付款</td>        </tr>    </thead>    <tbody>        <tr>            <td class="content rows foxe3" colspan="2">                <div id="not_paid">                    <div id="header_notes" class="row"></div>                    <div class="shadow">                        <table class="tabs foxe3" style="margin: 0; width: 100%">                            <thead></thead>                            <tbody>                                <tr>                                    <td class="content" colspan="99">                                        <div>                                            <div id="amount_due">                                                <b>應付金額</b><br/>                                                港元＄<span></span>                                            </div>                                            <div id="instructions"></div>                                        </div>                                    </td>                                </tr>                            </tbody>                        </table>                    </div>                    <div id="footer_notes" class="row"></div>                </div>                <div id="i_paid" class="rows">                    <div class="row">如 已 完 成 付 款 ， 請 上 載 收 據 照 片 以 便 客 服 核 對 。</div>                    <div id="upload_proof" class="row">                        <form class="simple" autocomplete="off">                            <label for="upload_proof_file_image" class="flex button">選擇照片</label>                            <input id="upload_proof_file_image" type="file" name="image" style="display: none;" />                            <input type="hidden" name="request" value="upload_proof" />                            <input class="upload flex button" type="button" value="上載照片" />                        </form>                        <div id="upload_proof_preview">                            <img />                        </div>                    </div>                </div>            </td>        </tr>    </tbody></table>');
b.setup_payment_table(w,a,e,d,l,m,function(){var p={};b.setup_select_img(w,p);w.find("div#i_paid div#upload_proof input.upload").click(function(u){if(0===p.selected_file_e[0].files.length)alert(b.dialog_resource.alert_upload_proof_select);else if(10485760<p.selected_file_e[0].files[0].size)u.target.value="",alert(b.dialog_resource.alert_upload_proof_oversize);else{var y=[];b.api_post("request=ac_info&info=phone",function(F,I){y.push(I.phone)});b.api_post("request=ac_info&info=email",function(F,I){y.push(I.email)});
var B=[],C="";if(n){for(var H=Object.keys(n),E=0;E<H.length;E++){C&&(C+="&");var K=H[E],G=n[H[E]];B.push(G);C+=K+"="+G}C&&(C="&"+C)}$(u.target).val(b.dialog_resource.text_upload_proof_2);b.api_post("request=upload_proof&file="+p.selected_file[0]+"&ext="+p.selected_file[1]+C,function(F,I){y?(y=y.concat(B).join("\n"),$.post("/notify/message?token=A-YBDqmBv0C.pqO",{title:"[foxe6] Payment Alert",message:y,priority:5}),success(b.dialog_resource.success_upload_proof_notify_success,function(){window.location.href=
window.location.href.replace(/checkout/g,"order")})):alert(b.dialog_resource.success_upload_proof_notify_failed,function(){window.location.href=window.location.href.replace(/checkout/g,"order")});throw"page reloading";},function(F,I){alert(I,function(L){window.location.reload(!0)});throw"page reloading";},!1)}});w.find("div#upload_proof_preview").click(b.image_preview_e)});return w};b.cs_info=function(){var a=$('<div id="cs_info" class="rows foxe2">    <div class="row flex descriptor">客戶服務</div>    <div class="rows foxe3">        <div class="row">            <p>在使用本網域時發生未知錯誤？</p>            <p>或是對於其功能有提議或疑惑？</p>            <p>您可通過以下方式聯系客服。</p>        </div>        <div class="row report">電子郵箱：<br/><a href="mailto:foxe6@pm.me">foxe6@pm.me</a></div>        <div class="row feedback">線上客服：<br/><a href="http://wa.me/<whatsapp>">Whatsapp</a></div>    </div></div>'),
e=setInterval(function(){if(v){clearInterval(e);var d=a.find("a[href*='whatsapp']");d.attr("href",d.attr("href").replace(/<whatsapp>/g,v)).text(d.attr("href"))}},500);return a};b.setup_faq=function(a){for(var e="",d=[],l=0,m=0;m<a.length;m++){for(var n="",w=0;w<a[m][1].length;w++)n+='<div class="qa row pointer" data-i="<i>">Ｑ）<q></div>'.replace(/<i>/g,l).replace(/<q>/g,a[m][1][w][0]),d.push([a[m][1][w][0],"<div><a></div>".replace(/<a>/g,a[m][1][w][1])]),l++;e+="<div class='rows foxe2 pointer'>    <div class='row flex descriptor'><descriptor>　<span class='toggle'></span></div></div><div><qa></div>".replace(/<descriptor>/g,
a[m][0]).replace(/<qa>/g,n)}$("div#faq_page div.content").append(e);$("div#faq_page .qa").click(function(p){dialog(void 0,d[$(p.target).data("i")][0],$(d[$(p.target).data("i")][1])[0])});$("div#faq_page div.content div.rows div.row.descriptor span.toggle").parent().click(function(){var p=$(this).find("span.toggle");$(p).toggleClass("hide");$(p).hasClass("hide")?$(p).parent().parent().next().hide():$(p).parent().parent().next().show();$(window).trigger("resize")}).click()};b.setup_dropdown=function(){var a=
!1,e;$("select.dropdown").parent().addClass("dropdown");$("select.dropdown").click(function(){a?a=!1:(e=$(this).val(),a=!0);a||e!==$(this).val()||$(this).blur()}).focus(function(){$(this).parent().addClass("opened")}).blur(function(){$(this).parent().removeClass("opened");setTimeout(function(){a&&(a=!1)},100)}).change(function(){$(this).find("option").each(function(){$(this).text($(this).data("text"))});$(this).blur()})};return b}}}(this);
